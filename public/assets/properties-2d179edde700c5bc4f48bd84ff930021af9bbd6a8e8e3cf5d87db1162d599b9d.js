$(document).ready(function(){function e(e){e.preventDefault();const r=$("#propertyCity").val(),t=$("#propertySAL1").val(),o=$("#propertySAL2").val(),a=$("#propertyState").val(),p=$("#propertyTSAL1").val(),n=$("#propertyTSAL2").val(),d=$("#PropertyUserID").val(),i=$("#propertyTNCity").val(),l=$("#propertyTNState").val(),s=$("#propertyBedroomA").val(),y=$("#propertyBedroomB").val(),c=$("#propertyPostalCode").val(),u=$("#propertyPropertyType").val(),_=$("#propertyTNPostalCode").val(),m=$("#propertyNewTenantName").val(),v=$("#propertyNewTenantPhone").val(),C=$("#propertyNewTenantEmail").val(),q=$("#propertyNewLeaseEndDate").val(),E=$(".currently-leased:checked").val(),L=$("#propertyNewLeaseStartDate").val(),N=$(".asked-for-property:checked").val(),T=$("#propertyLandlordContactName").val(),h=$("#propertyLandlordContactPhone").val(),f=$("#propertyLandlordContactEmail").val(),S=!!$("#propertyLandlordInfo").is(":checked");return $.ajax({url:"/properties",type:"POST",data:{property:{city:r,state:a,user_id:d,bed_one:s,bed_two:y,postal_code:c,property_type:u,saved_landlord:S,address_line_one:t,address_line_two:o,currently_leased:E,tenant_notice_city:i,tenant_notice_state:l,property_for_notice:N,landlord_contact_name:T,landlord_contact_phone:h,landlord_contact_email:f,tenant_notice_postal_code:_,tenant_notice_street_line_one:p,tenant_notice_street_line_two:n},tenant:{name:m,email:C,phone_number:v,lease_end_date:q,lease_start_date:L}},success:function(){},error:function(){}}),!1}function r(e){e.preventDefault();const r=$("#EpropertyID").val(),t=$("#EpropertyCity").val(),o=$("#EpropertySAL1").val(),a=$("#EpropertySAL2").val(),p=$("#EpropertyState").val(),n=$("#EpropertyTSAL1").val(),d=$("#EpropertyTSAL2").val(),i=$("#EPropertyUserID").val(),l=$("#EpropertyTNCity").val(),s=$("#EpropertyTNState").val(),y=$("#EpropertyBedroomA").val(),c=$("#EpropertyBedroomB").val(),u=$("#EpropertyPostalCode").val(),_=$("#EpropertyPropertyType").val(),m=$("#EpropertyTNPostalCode").val(),v=$("#EpropertyNewTenantName").val(),C=$("#EpropertyNewTenantPhone").val(),q=$("#EpropertyNewTenantEmail").val(),E=$("#EpropertyNewLeaseEndDate").val(),L=$(".currently-leased:checked").val(),N=$("#EpropertyNewLeaseStartDate").val(),T=$(".asked-for-property:checked").val(),h=$("#EpropertyLandlordContactName").val(),f=$("#EpropertyLandlordContactPhone").val(),S=$("#EpropertyLandlordContactEmail").val(),P=!!$("#EpropertyLandlordInfo").is(":checked");return $.ajax({url:`/properties/${r}`,type:"PUT",data:{property:{city:t,state:p,user_id:i,bed_one:y,bed_two:c,postal_code:u,property_id:r,property_type:_,saved_landlord:P,address_line_one:o,address_line_two:a,currently_leased:L,tenant_notice_city:l,tenant_notice_state:s,property_for_notice:T,landlord_contact_name:h,landlord_contact_phone:f,landlord_contact_email:S,tenant_notice_postal_code:m,tenant_notice_street_line_one:n,tenant_notice_street_line_two:d},tenant:{name:v,email:q,phone_number:C,lease_end_date:E,lease_start_date:N}},success:function(){},error:function(){}}),!1}function t(e){const r=$("#propertyLandlordContactName"),t=$("#propertyLandlordContactPhone"),o=$("#propertyLandlordContactEmail");$.ajax({url:"/properties/fetch_landlord",type:"GET",data:{property:{saved_landlord:e}},success:function(e){!0===e.success?(r.prop("disabled",!0).attr("value",e.message.name),t.prop("disabled",!0).attr("value",e.message.phone),o.prop("disabled",!0).attr("value",e.message.email)):!1===e.success&&("add_email"===e.method?$(".landlord_email_error").text("").show().text(e.message):"add_phone"===e.method?$(".landlord_phone_error").text("").show().text(e.message):"add_name"===e.method&&$(".landlord_name_error").text("").show().text(e.message))},error:function(){}})}function o(e,r){$.ajax({url:"/properties/get_zip_data/"+e,type:"GET",data:{},success:function(e){"tenant_notice"===r?!0===e.success?($("#propertyTNCity").attr("value",e.message.city),$("#propertyTNState").attr("value",e.message.state)):$("#IncorrectZipCodeTN").text("").show().text(e.message):!0===e.success?($("#propertyCity").attr("value",e.message.city),$("#propertyState").attr("value",e.message.state)):$("#IncorrectZipCode").text("").show().text(e.message)},error:function(){}})}$(function(){$("form[name='property_form']").validate({rules:{"property[City]":{required:!0},"property[SAL1]":{required:!0},"property[State]":{required:!0},"property[TSAL1]":{required:!0},"property[TNCity]":{required:!0},"property[TNState]":{required:!0},"property[PostalCode]":{required:!0},"property[TNPostalCode]":{required:!0},"property[property_type]":{required:!0},"property[LandlordContactName]":{required:!0},"property[LandlordContactPhone]":{required:!0},"property[LandlordContactEmail]":{required:!0}},messages:{"property[TNCity]":{required:"City is required"},"property[TNState]":{required:"State is required"},"property[State]":{required:"Please select state"},"property[City]":{required:"City name is required"},"property[TNPostalCode]":{required:"Postal Code is required"},"property[PostalCode]":{required:"Postal Code is required"},"property[property_type]":{required:"Please select property type"},"property[SAL1]":{required:"Street Address Line 1 is required"},"property[LandlordContactName]":{required:"Landlord Contact Name is required"},"property[LandlordContactEmail]":{required:"Landlord Contact Email is required"},"property[LandlordContactPhone]":{required:"Landlord Contact Phone is required"},"property[TSAL1]":{required:"Tenant Notice Address Street Line 1 is required"}},submitHandler:function(r,t){e(t)}})}),$(function(){$("form[name='edit_property_form']").validate({rules:{"Eproperty[City]":{required:!0},"Eproperty[State]":{required:!0},"Eproperty[TSAL1]":{required:!0},"Eproperty[TNCity]":{required:!0},"Eproperty[TNState]":{required:!0},"Eproperty[PostalCode]":{required:!0},"Eproperty[TNPostalCode]":{required:!0},"Eproperty[LandlordContactName]":{required:!0},"Eproperty[LandlordContactPhone]":{required:!0},"Eproperty[LandlordContactEmail]":{required:!0}},messages:{"Eproperty[TNCity]":{required:"City is required"},"Eproperty[TNState]":{required:"State is required"},"Eproperty[State]":{required:"Please select state"},"Eproperty[City]":{required:"City name is required"},"Eproperty[TNPostalCode]":{required:"Postal Code is required"},"Eproperty[PostalCode]":{required:"Postal Code is required"},"Eproperty[LandlordContactName]":{required:"Landlord Contact Name is required"},"Eproperty[LandlordContactEmail]":{required:"Landlord Contact Email is required"},"Eproperty[LandlordContactPhone]":{required:"Landlord Contact Phone is required"},"Eproperty[TSAL1]":{required:"Tenant Notice Address Street Line 1 is required"}},submitHandler:function(e,t){r(t)}})}),$("#propertyLandlordInfo").change(function(){const e=$("#propertyLandlordInfo");if(e.is(":checked"))t("true");else if(e.not(":checked")){const e=$("#propertyLandlordContactName"),r=$("#propertyLandlordContactPhone"),t=$("#propertyLandlordContactEmail");e.prop("disabled",!1).attr("value",""),r.prop("disabled",!1).attr("value",""),t.prop("disabled",!1).attr("value","")}}),$("input.zipcode_interactive").blur(function(){$("#IncorrectZipCode").text(""),$("#IncorrectZipCodeTN").text(""),o($(this).val(),$(this).data("from"))}),$(".currently-leased").change(function(){const e=$(this).val();"true"===e?$("#TenantSection").show():"false"===e&&$("#TenantSection").hide()}),$(".asked-for-property").change(function(){const e=$(this).val();"true"===e?$("#TenantNoticeSection").hide():"false"===e&&$("#TenantNoticeSection").show()})});