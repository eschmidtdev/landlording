$(document).ready(function(){function e(e){e.preventDefault();const t=$("#propertyCity").val(),r=$("#propertySAL1").val(),a=$("#propertySAL2").val(),o=$("#propertyState").val(),n=$("#propertyTSAL1").val(),p=$("#propertyTSAL2").val(),d=$("#PropertyUserID").val(),i=$("#propertyTNCity").val(),l=$("#propertyTNState").val(),s=$("#propertyBedroomA").val(),y=$("#propertyBedroomB").val(),c=$("#propertyPostalCode").val(),u=$("#propertyPropertyType").val(),_=$("#propertyTNPostalCode").val(),m=$("#propertyNewTenantName").val(),v=$("#propertyNewTenantPhone").val(),C=$("#propertyNewTenantEmail").val(),E=$("#propertyNewLeaseEndDate").val(),q=$("#ADpropertyNewTenantName").val(),T=$("#ADpropertyNewTenantPhone").val(),N=$("#ADpropertyNewTenantEmail").val(),L=$(".currently-leased:checked").val(),f=$("#propertyNewLeaseStartDate").val(),h=$(".asked-for-property:checked").val(),S=$("#propertyLandlordContactName").val(),P=$("#propertyLandlordContactPhone").val(),w=$("#propertyLandlordContactEmail").val(),A=!!$("#propertyLandlordInfo").is(":checked");return $.ajax({url:"/properties",type:"POST",data:{property:{city:t,state:o,user_id:d,bed_one:s,bed_two:y,postal_code:c,property_type:u,saved_landlord:A,address_line_one:r,address_line_two:a,currently_leased:L,tenant_notice_city:i,tenant_notice_state:l,property_for_notice:h,landlord_contact_name:S,landlord_contact_phone:P,landlord_contact_email:w,tenant_notice_postal_code:_,tenant_notice_street_line_one:n,tenant_notice_street_line_two:p},tenant:{name:m,email:C,phone_number:v,lease_end_date:E,lease_start_date:f,additional_tenant_name:q,additional_tenant_phone:T,additional_tenant_email:N}},success:function(){},error:function(){}}),!1}function t(e){e.preventDefault();const t=$("#EpropertyID").val(),r=$("#EpropertyCity").val(),a=$("#EpropertySAL1").val(),o=$("#EpropertySAL2").val(),n=$("#EpropertyState").val(),p=$("#EpropertyTSAL1").val(),d=$("#EpropertyTSAL2").val(),i=$("#EPropertyUserID").val(),l=$("#EpropertyTNCity").val(),s=$("#EpropertyTNState").val(),y=$("#EpropertyBedroomA").val(),c=$("#EpropertyBedroomB").val(),u=$("#EpropertyPostalCode").val(),_=$("#EpropertyPropertyType").val(),m=$("#EpropertyTNPostalCode").val(),v=$("#EpropertyNewTenantName").val(),C=$("#ADpropertyNewTenantName").val(),E=$("#EpropertyNewTenantPhone").val(),q=$("#EpropertyNewTenantEmail").val(),T=$("#EpropertyNewLeaseEndDate").val(),N=$(".currently-leased:checked").val(),L=$("#ADpropertyNewTenantPhone").val(),f=$("#ADpropertyNewTenantEmail").val(),h=$("#EpropertyNewLeaseStartDate").val(),S=$(".asked-for-property:checked").val(),P=$("#EpropertyLandlordContactName").val(),w=$("#EpropertyLandlordContactPhone").val(),A=$("#EpropertyLandlordContactEmail").val(),g=!!$("#EpropertyLandlordInfo").is(":checked");return $.ajax({url:`/properties/${t}`,type:"PUT",data:{property:{city:r,state:n,user_id:i,bed_one:y,bed_two:c,postal_code:u,property_type:_,saved_landlord:g,address_line_one:a,address_line_two:o,currently_leased:N,tenant_notice_city:l,tenant_notice_state:s,property_for_notice:S,landlord_contact_name:P,landlord_contact_phone:w,landlord_contact_email:A,tenant_notice_postal_code:m,tenant_notice_street_line_one:p,tenant_notice_street_line_two:d},tenant:{name:v,email:q,phone_number:E,lease_end_date:T,lease_start_date:h,additional_tenant_name:C,additional_tenant_phone:L,additional_tenant_email:f}},success:function(){},error:function(){}}),!1}function r(e){const t=$("#propertyLandlordContactName"),r=$("#propertyLandlordContactPhone"),a=$("#propertyLandlordContactEmail");$.ajax({url:"/properties/fetch_landlord",type:"GET",data:{property:{saved_landlord:e}},success:function(e){!0===e.success?(t.prop("disabled",!0).attr("value",e.message.name),r.prop("disabled",!0).attr("value",e.message.phone),a.prop("disabled",!0).attr("value",e.message.email)):!1===e.success&&("add_email"===e.method?$(".landlord_email_error").text("").show().text(e.message):"add_phone"===e.method?$(".landlord_phone_error").text("").show().text(e.message):"add_name"===e.method&&$(".landlord_name_error").text("").show().text(e.message))},error:function(){}})}function a(e,t){$.ajax({url:"/properties/get_zip_data/"+e,type:"GET",data:{},success:function(e){"tenant_notice"===t?!0===e.success?($("#propertyTNCity").attr("value",e.message.city),$("#propertyTNState").attr("value",e.message.state)):$("#IncorrectZipCodeTN").text("").show().text(e.message):!0===e.success?($("#propertyCity").attr("value",e.message.city),$("#propertyState").attr("value",e.message.state)):$("#IncorrectZipCode").text("").show().text(e.message)},error:function(){}})}$(function(){$("form[name='property_form']").validate({rules:{"property[City]":{required:!0},"property[SAL1]":{required:!0},"property[State]":{required:!0},"property[TSAL1]":{required:!0},"property[TNCity]":{required:!0},"property[TNState]":{required:!0},"property[PostalCode]":{required:!0},"property[TNPostalCode]":{required:!0},"property[property_type]":{required:!0},"property[LandlordContactName]":{required:!0},"property[LandlordContactPhone]":{required:!0},"property[LandlordContactEmail]":{required:!0}},messages:{"property[TNCity]":{required:"City is required"},"property[TNState]":{required:"State is required"},"property[State]":{required:"Please select state"},"property[City]":{required:"City name is required"},"property[TNPostalCode]":{required:"Postal Code is required"},"property[PostalCode]":{required:"Postal Code is required"},"property[property_type]":{required:"Please select property type"},"property[SAL1]":{required:"Street Address Line 1 is required"},"property[LandlordContactName]":{required:"Landlord Contact Name is required"},"property[LandlordContactEmail]":{required:"Landlord Contact Email is required"},"property[LandlordContactPhone]":{required:"Landlord Contact Phone is required"},"property[TSAL1]":{required:"Tenant Notice Address Street Line 1 is required"}},submitHandler:function(t,r){e(r)}})}),$(function(){$("form[name='edit_property_form']").validate({rules:{"Eproperty[City]":{required:!0},"Eproperty[State]":{required:!0},"Eproperty[TSAL1]":{required:!0},"Eproperty[TNCity]":{required:!0},"Eproperty[TNState]":{required:!0},"Eproperty[PostalCode]":{required:!0},"Eproperty[TNPostalCode]":{required:!0},"Eproperty[LandlordContactName]":{required:!0},"Eproperty[LandlordContactPhone]":{required:!0},"Eproperty[LandlordContactEmail]":{required:!0}},messages:{"Eproperty[TNCity]":{required:"City is required"},"Eproperty[TNState]":{required:"State is required"},"Eproperty[State]":{required:"Please select state"},"Eproperty[City]":{required:"City name is required"},"Eproperty[TNPostalCode]":{required:"Postal Code is required"},"Eproperty[PostalCode]":{required:"Postal Code is required"},"Eproperty[LandlordContactName]":{required:"Landlord Contact Name is required"},"Eproperty[LandlordContactEmail]":{required:"Landlord Contact Email is required"},"Eproperty[LandlordContactPhone]":{required:"Landlord Contact Phone is required"},"Eproperty[TSAL1]":{required:"Tenant Notice Address Street Line 1 is required"}},submitHandler:function(e,r){t(r)}})}),$(".currently-leased").change(function(){const e=$(this).val();"true"===e?($("#TenantSection").fadeIn(250),$("#EditTenantSection").removeClass("display_none").fadeIn(250)):"false"===e&&($("#TenantSection").fadeOut(250),$("#EditTenantSection").fadeOut(250))}),$(".asked-for-property").change(function(){const e=$(this).val();"true"===e?($("#TenantNoticeSection").fadeOut(250),$("#EditTenantNoticeSection").fadeOut(250)):"false"===e&&($("#TenantNoticeSection").fadeIn(250),$("#EditTenantNoticeSection").removeClass("display_none").fadeIn(250))}),$("#propertyLandlordInfo").change(function(){const e=$("#propertyLandlordInfo");if(e.is(":checked"))r("true");else if(e.not(":checked")){const e=$("#propertyLandlordContactName"),t=$("#propertyLandlordContactPhone"),r=$("#propertyLandlordContactEmail");e.prop("disabled",!1).attr("value",""),t.prop("disabled",!1).attr("value",""),r.prop("disabled",!1).attr("value","")}}),$("input.zipcode_interactive").blur(function(){$("#IncorrectZipCode").text(""),$("#IncorrectZipCodeTN").text(""),a($(this).val(),$(this).data("from"))}),$("#SwitchAdditionalTenant").click(function(){$(this).hide(),$("#AdditionalTenantSection").fadeIn(250)})});