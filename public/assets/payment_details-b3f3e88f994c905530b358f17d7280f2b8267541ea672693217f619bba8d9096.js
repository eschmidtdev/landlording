$(document).ready(function(){function e(){const e=$("#BillingCN").val(),i=$("#BillingLN").val(),r=$("#BillingFN").val(),a=$("#BillingPC").val(),t=$("#BillingAL1").val(),n=$("#BillingAL2").val(),s=$("#BillingCVC").val(),d=$("#BillingEXP").val(),u=$("#BillingCity").val(),o=$("#BillingState").val(),c=$("#BillingUserID").val(),g=$("#BillingCountry").val(),p=$("#BillingCardNumber").val(),B=l(p),m=!!$("#SameAccountAddress").is(":checked");return $.ajax({url:`/payment_details/${c}`,type:"PUT",data:{payment_detail:{cvc:s,city:u,state:o,brand:B,user_id:c,company:e,country:g,last_name:i,first_name:r,exp:d,postal_code:a,card_number:p,is_address:m,address_line_two:n,address_line_one:t}},success:function(){},error:function(){}}),!1}function i(){const e=$("#BillingCN"),i=$("#BillingLN"),l=$("#BillingFN"),r=$("#BillingPC"),a=$("#BillingAL1"),t=$("#BillingAL2"),n=$("#BillingCity"),s=$("#BillingState"),d=$("#BillingCountry");$.ajax({url:"/payment_details/fetch_landlord",type:"GET",data:{payment_detail:{}},success:function(u){!0===u.success?(n.prop("disabled",!0).attr("value",u.user.city),s.prop("disabled",!0).attr("value",u.user.state),d.prop("disabled",!0).attr("value",u.user.country),e.prop("disabled",!0).attr("value",u.user.company),i.prop("disabled",!0).attr("value",u.user.last_name),l.prop("disabled",!0).attr("value",u.user.first_name),r.prop("disabled",!0).attr("value",u.user.postal_code),a.prop("disabled",!0).attr("value",u.user.address_line_one),t.prop("disabled",!0).attr("value",u.user.address_line_two)):!1===u.success&&("Please update Address Line 1 in account settings first."===u.message?$("#BillingAL1Err").text("").append(u.message):"Please update Postal Code in account settings first."===u.message&&$("#IncorrectZipCode").text("").append(u.message))},error:function(){}})}function l(e){return(e=e.replace(/[^\d]/g,"")).match(/^5[1-5][0-9]{5,}$/)?"MasterCard":e.match(/^4[0-9]{6,}$/)?"Visa":e.match(/^3[47][0-9]{5,}$/)?"AMEX":e.match(/^6(?:011|5[0-9]{2})[0-9]{3,}$/)?"Discover":e.match(/^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/)?"Diners Club":e.match(/^(?:2131|1800|35[0-9]{3})[0-9]{3,}$/)?"JCB":"UNKNOWN"}$(function(){$("form[name='billing_information']").validate({rules:{"Billing[FN]":{required:!0},"Billing[LN]":{required:!0},"Billing[PC]":{required:!0},"Billing[AL1]":{required:!0},"Billing[EXP]":{required:!0},"Billing[CVC]":{required:!0},"Billing[City]":{required:!0},"Billing[CardNumber]":{required:!0}},messages:{"Billing[AL1]":{required:"Address is required"},"Billing[EXP]":{required:"Expiration required"},"Billing[City]":{required:"City Name is required"},"Billing[LN]":{required:"Last Name is required"},"Billing[FN]":{required:"First Name is required"},"Billing[PC]":{required:"Postal Code is required"},"Billing[CVC]":{required:"Security Code is required"},"Billing[CardNumber]":{required:"Card Number is required"}},submitHandler:function(i,l){e(l)}})}),$(".fetch-account-address").change(function(){const e=$("#SameAccountAddress");e.is(":checked")?i():e.not(":checked")&&($("#BillingCity").attr("value",""),$("#BillingState").attr("value",""),$("#BillingCountry").attr("value",""),$("#BillingFN").prop("disabled",!1).attr("value",""),$("#BillingLN").prop("disabled",!1).attr("value",""),$("#BillingCN").prop("disabled",!1).attr("value",""),$("#BillingPC").prop("disabled",!1).attr("value",""),$("#BillingAL1").prop("disabled",!1).attr("value",""),$("#BillingAL2").prop("disabled",!1).attr("value",""))})});