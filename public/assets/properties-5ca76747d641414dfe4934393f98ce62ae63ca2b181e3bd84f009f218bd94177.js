$(document).ready(function(){function e(e){e.preventDefault();const t=$("#propertyCity").val(),r=$("#propertySAL1").val(),o=$("#propertySAL2").val(),a=$("#propertyState").val(),n=$("#propertyTSAL1").val(),p=$("#propertyTSAL2").val(),d=$("#PropertyUserID").val(),i=$("#propertyTNCity").val(),s=$("#propertyTNState").val(),l=$("#propertyBedroomA").val(),c=$("#propertyBedroomB").val(),y=$("#propertyPostalCode").val(),u=$("#propertyPropertyType").val(),_=$("#propertyTNPostalCode").val(),m=$("#propertyNewTenantName").val(),v=$("#propertyNewTenantPhone").val(),C=$("#propertyNewTenantEmail").val(),h=$("#propertyNewLeaseEndDate").val(),q=$(".currently-leased:checked").val(),L=$("#propertyNewLeaseStartDate").val(),f=$(".asked-for-property:checked").val(),T=$("#propertyLandlordContactName").val(),N=$("#propertyLandlordContactPhone").val(),S=$("#propertyLandlordContactEmail").val(),P=!!$("#propertyLandlordInfo").is(":checked");return $.ajax({url:"/properties",type:"POST",data:{property:{city:t,state:a,user_id:d,bed_one:l,bed_two:c,postal_code:y,property_type:u,saved_landlord:P,address_line_one:r,address_line_two:o,currently_leased:q,tenant_notice_city:i,tenant_notice_state:s,property_for_notice:f,landlord_contact_name:T,landlord_contact_phone:N,landlord_contact_email:S,tenant_notice_postal_code:_,tenant_notice_street_line_one:n,tenant_notice_street_line_two:p},tenant:{name:m,email:C,phone_number:v,lease_end_date:h,lease_start_date:L}},success:function(){},error:function(){}}),!1}function t(e){const t=$("#propertyLandlordContactName"),r=$("#propertyLandlordContactPhone"),o=$("#propertyLandlordContactEmail");$.ajax({url:"/properties/fetch_landlord",type:"GET",data:{property:{saved_landlord:e}},success:function(e){!0===e.success?(t.prop("disabled",!0).attr("value",e.message.name),r.prop("disabled",!0).attr("value",e.message.phone),o.prop("disabled",!0).attr("value",e.message.email)):!1===e.success&&("add_email"===e.method?$(".landlord_email_error").text("").show().text(e.message):"add_phone"===e.method?$(".landlord_phone_error").text("").show().text(e.message):"add_name"===e.method&&$(".landlord_name_error").text("").show().text(e.message))},error:function(){}})}function r(e,t){$.ajax({url:"/properties/get_zip_data/"+e,type:"GET",data:{},success:function(e){"tenant_notice"===t?!0===e.success?($("#propertyTNCity").attr("value",e.message.city),$("#propertyTNState").attr("value",e.message.state)):$("#IncorrectZipCodeTN").text("").show().text(e.message):!0===e.success?($("#propertyCity").attr("value",e.message.city),$("#propertyState").attr("value",e.message.state)):$("#IncorrectZipCode").text("").show().text(e.message)},error:function(){}})}$(function(){$("form[name='property_form']").validate({rules:{"property[City]":{required:!0},"property[SAL1]":{required:!0},"property[State]":{required:!0},"property[TSAL1]":{required:!0},"property[TNCity]":{required:!0},"property[TNState]":{required:!0},"property[PostalCode]":{required:!0},"property[TNPostalCode]":{required:!0},"property[property_type]":{required:!0},"property[LandlordContactName]":{required:!0},"property[LandlordContactPhone]":{required:!0},"property[LandlordContactEmail]":{required:!0}},messages:{"property[TNCity]":{required:"City is required"},"property[TNState]":{required:"State is required"},"property[State]":{required:"Please select state"},"property[City]":{required:"City name is required"},"property[TNPostalCode]":{required:"Postal Code is required"},"property[PostalCode]":{required:"Postal Code is required"},"property[property_type]":{required:"Please select property type"},"property[SAL1]":{required:"Street Address Line 1 is required"},"property[LandlordContactName]":{required:"Landlord Contact Name is required"},"property[LandlordContactEmail]":{required:"Landlord Contact Email is required"},"property[LandlordContactPhone]":{required:"Landlord Contact Phone is required"},"property[TSAL1]":{required:"Tenant Notice Address Street Line 1 is required"}},submitHandler:function(t,r){e(r)}})}),$("#propertyLandlordInfo").change(function(){const e=$("#propertyLandlordInfo");if(e.is(":checked"))t("true");else if(e.not(":checked")){const e=$("#propertyLandlordContactName"),t=$("#propertyLandlordContactPhone"),r=$("#propertyLandlordContactEmail");e.prop("disabled",!1).attr("value",""),t.prop("disabled",!1).attr("value",""),r.prop("disabled",!1).attr("value","")}}),$("input.zipcode_interactive").blur(function(){$("#IncorrectZipCode").text(""),$("#IncorrectZipCodeTN").text(""),r($(this).val(),$(this).data("from"))}),$(".currently-leased").change(function(){const e=$(this).val();"true"===e?$("#TenantSection").show():"false"===e&&$("#TenantSection").hide()}),$(".asked-for-property").change(function(){const e=$(this).val();"true"===e?$("#TenantNoticeSection").hide():"false"===e&&$("#TenantNoticeSection").show()})});